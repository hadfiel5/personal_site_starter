
<!-- backend/templates/resume_print.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{{ preset.name }} – Resume</title>
  <style>
    /* Print-friendly baseline */
    @page { size: A4; margin: 10mm; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; color: #111; }
    h1 { font-size: 1.6rem; margin: 0 0 0.25rem 0; }
    h2 { font-size: 1.1rem; margin: 1rem 0 0.25rem 0; border-bottom: 1px solid #ddd; padding-bottom: 0.15rem; }
    .centered { margin-left:auto; margin-right:auto; text-align:center; }
    .section { margin-top: 0.6rem; clear:both; }
    .item { margin: 0.3rem 0; font-size: 0.9em; overflow: hidden;}
    .muted { color: #555; }
    .badges { font-size: 0.8rem; color:#444;}
    .titleholder {width:550px; display: block;}
    .titlename {width:500px; height:18px; float:left}
    .titleloc {width:500px; height:18px; float:left}
    .titleimg {width:40px; float:left}
    .extrabottom { margin-bottom: 20mm; }
    .description { display: block; width: 100%; min-height: 20px; margin-bottom: 0.8rem;}
    .description p {text-align: center; min-height: 1.5rem;}
    .datestring {height:18px;}
    .sectioncontainer { width: 100%; display: inline-block;}
    ul { margin: 0.1rem 0 1rem 0rem; display:inline-block; padding-left: 20px;}
    li { margin: 0.1rem 0; }
    /* .row { display:block; justify-content: space-between; gap: 0.5rem; }
    .row::after { content: ""; display: table; clear: both; } */
    .row { display:table; width: 100%; table-layout: fixed; }
    .left, .right { display: table-cell; vertical-align: middle; }
    .right { text-align: right; }
    /* .left { float:left }
    .right { text-align:right; min-width: 140px; float:right} */
    .skills { font-size: 0.85rem; color: #555; }
    .logo { height: 30px; width: 30px; object-fit: cover; vertical-align: middle; border-radius: 3px; margin-right: 6px; }
    .education { margin-bottom: 1em;}
  </style>
</head>
<body>

  <!-- Header -->
  <h1 class="centered">{{ preset.header_title }}</h1>
  <div class="row extrabottom">
    <div class="left muted">{{preset.email}}</div>
    <div class="right muted">{{preset.phone}}</div>
  </div>
  <p class="muted centered description">{{ preset.description }}</p>
  
  {# Education #}
  <div class="section">
    <h2>Education</h2>

    {% for edu in educations %}
      <div class="item education">
        <div class="row">
          <div class="left titleholder">
            <!-- institution logo -->
            {% if edu.institution and edu.institution.logo %}
            <div class="titleimg">
              <img class="logo" src="{{ edu.institution.logo.url }}" alt="logo"/>
            </div>
            {% endif %}

            <!-- degree + major + institution name -->
            <div class="titlename">
              <strong>{{ edu.degree_name }}</strong>{% if edu.major %} <span class="muted">— {{ edu.major }}</span>{% endif %} {% if edu.minor %}
          <span class="muted">· Minor: {{ edu.minor }}</span>
        {% endif %}
            </div>
            <div class="titleloc">
              {% if edu.institution %}
                <span class="muted"> {{ edu.institution.long_name|default:edu.institution.short_name }}</span>
              {% endif %}
              {% if edu.gpa %}<span class="muted">· GPA: {{ edu.gpa }}</span>{% endif %}
            </div>
          </div>

          <!-- dates -->
          <div class="right muted datestring">
            {{ edu.start_date|date:"M Y" }} – {% if edu.end_date %}{{ edu.end_date|date:"M Y" }}{% else %}Present{% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>


  <!-- Experience -->
  {% if experiences %}
  <div class="section">
    <h2>Experience</h2>
    {% for e in experiences %}
      <div class="item">
        <div class="row">
          <div class="left titleholder">
            {% if e.target and e.target.logo %}
              <div class="titleimg">
                <img class="logo" src="{{ e.target.logo.url }}" alt="logo"/>
              </div>
            {% endif %}
            <div class="titlename">
              <strong>{{ e.role }}</strong> 
            </div>
            <div class="titleloc">
              {% if e.target %}<span class="muted"> {{ e.target.long_name|default:e.target.short_name }}</span>{% endif %}
              {% if e.location %}<span class="muted"> · {{ e.location }}</span>{% endif %}
            </div>
          </div>
          <div class="right muted datestring">
            {{ e.start_date|date:"M Y" }} – {% if e.end_date %}{{ e.end_date|date:"M Y" }}{% else %}Present{% endif %}
          </div>
        </div>
        {% if e.highlights.all %}
          <ul>
            {% for h in e.highlights.all %}
              <li>{{ h.text }}</li>
            {% endfor %}
          </ul>
        {% endif %}
        <!-- {% if e.skills.all %}
          <div class="skills">
            {% for s in e.skills.all %}
              {{ s.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </div>
        {% endif %} -->
      </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Leadership & Volunteer -->
  {% if leadership %}
  <div class="section">
    <h2>Leadership & Volunteer</h2>
    {% for l in leadership %}
      <div class="item">
        <div class="row">
          <div class="left titleholder">
            {% if l.target and l.target.logo %}
              <div class="titleimg">
                <img class="logo" src="{{ l.target.logo.url }}" alt="logo"/>
              </div>
            {% endif %}
            <div class="titlename">
              <strong>{{ l.title }}</strong> 
            </div>
            <div class="titleloc">
              {% if l.target %}<span class="muted"> {{ l.target.long_name|default:l.target.short_name }}</span>{% endif %}
              {% if l.location %}<span class="muted"> · {{ l.location }}</span>{% endif %}
            </div>
          </div>
          <div class="right muted">
            {{ l.start_date|date:"M Y" }} – {% if l.end_date %}{{ l.end_date|date:"M Y" }}{% else %}Present{% endif %}
          </div>
        </div>
        {% if l.summary %}<div class="muted">{{ l.summary }}</div>{% endif %}
        {% if l.highlights.all %}
        <ul>
          {% for h in l.highlights.all %}
            <li>{{ h.text }}</li>
          {% endfor %}
        </ul>
        {% endif %}
        <!-- {% if l.skills.all %}
          <div class="skills">
            {% for s in l.skills.all %}
              {{ s.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </div>
        {% endif %} -->
      </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Projects -->
  {% if projects %}
  <div class="section">
    <h2>Projects</h2>
    {% for p in projects %}
      <div class="item">
        <strong>{{ p.name }}</strong>{% if p.role %} <span class="muted"> · {{ p.role }}</span>{% endif %}
        {% if p.summary %}<div class="muted">{{ p.summary }}</div>{% endif %}
      </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Publications -->
  {% if publications %}
  <div class="section">
    <h2>Publications</h2>
    {% for pub in publications %}
      <div class="item">
        <strong>{{ pub.title }}</strong>
        {% if pub.journal_or_venue %}
          <span class="muted"> — {{ pub.journal_or_venue }}</span>
        {% endif %}
        {% if pub.year %}<span class="muted">, {{ pub.year }}</span>{% endif %}
        {% if pub.pages %}<span class="muted">, pp. {{ pub.pages }}</span>{% endif %}
        <div class="muted">
          {% for a in pub.authors.all %}
            {% if a.me %}<strong>{{ a.full_name }}</strong>{% else %}{{ a.full_name }}{% endif %}
            {% if a.corresponding %}✉︎{% endif %}
            {% if not forloop.last %}, {% endif %}
          {% endfor %}
        </div>
        {% if pub.doi %}<div class="muted">DOI: https://doi.org/{{ pub.doi }}</div>{% endif %}
      </div>
    {% endfor %}
  </div>
  {% endif %}

</body>
</html>
